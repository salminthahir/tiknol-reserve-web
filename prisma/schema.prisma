// 1. Konfigurasi Koneksi (Sudah Benar Sesuai .env Kamu)
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// 2. Model Order (CUMA BOLEH ADA SATU)
model Order {
  id           String   @id @default(cuid()) // ID Unik (misal: cmkp...)
  
  // Data Customer
  customerName String
  whatsapp     String
  
  // Data Transaksi
  totalAmount  Int
  items        Json     // Menyimpan detail menu (nama, qty, harga)
  
  // Status Pembayaran & Dapur
  // Values: "PENDING", "PAID", "PREPARING", "READY", "COMPLETED", "FAILED"
  status       String   @default("PENDING") 
  
  // Token Midtrans (Disimpan biar user bisa resume payment)
  snapToken    String?  

  orderSource  String  @default("WEB_CUSTOMER") // Values: "WEB_CUSTOMER", "CASHIER_POS"
  paymentType  String // "CASH", "QRIS", "DEBIT"
  
  // Waktu
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model Product {
  id          String   @id @default(cuid())
  name        String
  description String?
  price       Int
  image       String?  // URL gambar dari Supabase Storage
  category    String   // Misal: "Coffee", "Non-Coffee", "Snack"
  isAvailable Boolean  @default(true) // Buat switch On/Off stok habis

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}